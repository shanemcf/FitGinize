(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{118:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return A}));var a=t(0),o=t.n(a),l=t(3),i=t.n(l),c=t(440),r=t(2),s=t(441),u=t(435),d=t(652),f=t(996),m=t.n(f),v=o()(document.body),h=v.data("save-with-collection"),p=v.data("save-with-success"),b=o()(".modal.favorite-collections-modal"),g=b.length?new c.a(b,"favorite-collections-modal"):null,y=o()(".modal.save-success-modal"),w=y.length?new c.a(y,"save-success-modal"):null;function x(e){var n=o()(".favorite-collections-modal .alert-banner");n.removeClass("hidden"),n.find(".alert-text").text(e)}function j(){var e=o()(".favorite-collections-modal .alert-banner");e.addClass("hidden"),e.find(".alert-text").text("")}function C(e){return!(e&&e.length>40)||(x("The collection name is too long (max 40 characters)"),!1)}function O(e,n,t){var a=Object(u.a)("/element-api/content-proxy/favorite");o.a.ajax({url:a,type:"GET",data:e,cache:!1,success:function(e,t,a){if(200===a.status){var o=JSON.parse(e);o.IsFavorite&&!0===o.IsFavorite&&(n.find(".icon-text").html("Saved"),n.addClass("saved"),i()(r.rb).broadcast())}}}).fail((function(a){500!==a.status||t||Object(d.a)(O,[e,n])})).always((function(){n.addClass("initialized")}))}function k(e,n){var t=Object(u.a)("/element-api/content-proxy/favorite-collections"),a=e,l=o()(".lead-content-wrapper .image-container .component.lazy-image");a.image_src=l.data("src"),a.image_width=l.data("original-width"),a.image_height=l.data("original-height"),a.title=o()(".intro.article-info .headline").text(),o.a.get(t,e,(function(e){e.html&&(g.open(e.html),i()(r.xb).broadcast(),i()(r.K).broadcast())})).fail((function(t){500!==t.status||n||Object(d.a)(O,[e])}))}function D(){g.close()}function S(e,n,t){var a=Object(u.a)("/element-api/content-proxy/favorite");n.addClass("saving"),o.a.post(a,e,(function(e){JSON.parse(e).recipeBoxItemID&&(n.find(".icon-text").html("Saved"),n.addClass("saved"),n.removeClass("saving"),i()(r.rb).broadcast())})).fail((function(a){n.removeClass("saving"),500!==a.status||t||Object(d.a)(S,[e,n])}))}function T(e,n,t){var a=Object(u.a)("/element-api/content-proxy/favorite");n.addClass("saving"),o.a.ajax({url:a,type:"DELETE",data:e,success:function(e,t,a){200===a.status&&(n.find(".icon-text").html("Save"),n.removeClass("saving"),n.removeClass("saved"),console.log("Removed successfully"),i()(r.rb).broadcast())},error:function(a){n.removeClass("saving"),500!==a.status||t||Object(d.a)(T,[e,n])}})}function A(){var e=o()(".shareicon-favorite-link"),n=e.data("content-id");function t(){e.length&&(v.hasClass("authenticated")?O({id:n},e):(e.attr("aria-label","".concat(e.attr("aria-label")||""," (opens in a new window)")),i()(r.rb).broadcast()))}t(),document.body.addEventListener(r.e,(function(){t()})),i()(r.o).subscribe((function(t,a){if(a.closest(e).length)if(t.preventDefault(),v.hasClass("authenticated")&&e.hasClass("initialized")&&!e.hasClass("saving")){var o={id:n};e.hasClass("saved")?h?k(o,!0):T(o,e):(S(o,e),h?k(o,!1):p&&w.open())}else{var l=e.data("content-login-url");setTimeout((function(){window.open(l,"_self")}),0)}}));var a=o()(".modal.share-icons"),l="";function u(e,n){e[0].target.classList.contains("modal-active")||(o()(".ugc-comments-add-comment").trigger("click"),n.disconnect())}function d(e,n){o()(".js-ugc-comments-outer-comment-wrap").hasClass("test-ugc-comments__hide")&&o()(window).trigger("revealComments"),e.preventDefault(),l.close();var t=n.data("content-id");document.querySelector(t).scrollIntoView(!0)}a.length&&(l=new c.a(a,"share-icons")),i()(r.o).subscribe((function(t,a){var i=o()(".shareicon-modal-toggle"),c=o()(".shareicon-print-link"),r=c.parents(".article-container"),f=o()(".js-view-comments-btn-comments"),v=o()(".js-view-comments-btn-nocomments"),h=o()(".favorite-collections-add-icon"),p=o()(".favorite-collections-footer-remove"),b=o()(".favorite-collections-footer-done");if(Object(s.a)(a,b))D();else if(Object(s.a)(a,p)){T({id:n},e),D()}else if(Object(s.a)(a,h)){var g=o()(".favorite-collections-add-input").val();(function(e){if(!C(e))return!1;if(!e)return x("A new collection name is required"),!1;var n=!1;return o()(".favorite-collections-item-name").each((function(t,a){return a.innerText!==e||(n=!0,!1)})),n?(x('The collection "'.concat(e,'" already exists')),!1):(j(),!0)})(g)&&function(e){var n=(new Date).getTime(),t=o()(m()({id:n,name:e}));t.find(".checkbox-list").attr("for",n),t.find(".checkbox-list-input").attr("id",n).val(e).attr("checked","checked"),t.find(".favorite-collections-item-name").text(e),o()(".favorite-collections-section").prepend(t),o()(".favorite-collections-add-input").val(""),o()(".favorite-collections-footer-done").focus()}(g)}else if(Object(s.a)(a,i)){t.preventDefault();var y=a.parents(".docked-sharebar").find(".sharebar-modal").html();!y&&a.parents(".longform-main-container").length&&(y=a.parents(".longform-main-container").find(".longform__shareModal").html());var w=a.parents(".shareicon-modal-toggle").data("share-id");w&&(y=o()("div[id='".concat(w,"']")).html(),w+="_share-new"),l.open(y),a.get(0).id=a.get(0).id||w||"share-id-".concat((new Date).getTime()),l.$modal.data("source-target-id",a.get(0).id)}else if(Object(s.a)(a,c))t.preventDefault(),l&&l.close(),r.addClass("print-article"),window.print(),r.removeClass("print-article");else if(Object(s.a)(a,f))d(t,f);else if(Object(s.a)(a,v)){if(t.preventDefault(),"#ugc-comments"===v.data("content-id"))if(t.stopPropagation(),o()("body").hasClass("authenticated"))new MutationObserver(u).observe(document.body,{attributes:!0}),l.close();else window.location=v.data("content-login-url");else d(t,v)}})),i()(r.O).subscribe((function(e,n){Object(s.a)(n,o()(".favorite-collections-add-input"))&&C(o()(".favorite-collections-add-input").val())&&j()})),i()(r.Kb).subscribe((function(e){var n=o()(".icon.icon-print").find("a[href$='?printview']");e.preventDefault(),n.click()}))}},435:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var a=t(1),o=t.n(a),l=t(0),i=t.n(l);function c(e){return i()(document.body).data("add-slash")&&!o.a.endsWith(e,"/")?"".concat(e,"/"):e}},652:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var a=t(1),o=t.n(a),l=t(0),i=t.n(l),c=t(435);function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return s(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function u(e,n){var t=Object(c.a)("/element-api/content-proxy/refresh-cookie");i.a.ajax({url:t,retry:!1,type:"GET",timeout:3e3,xhrFields:{withCredentials:!0},success:function(t){o.a.isArray(t)&&"function"==typeof e&&(o.a.forEach(t,(function(e){document.cookie=e})),e.apply(void 0,r(n).concat([!0])))}})}},996:function(e,n,t){var a=t(22);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,a,o){var l,i=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,r="function",s=e.escapeExpression,u=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<li class="favorite-collections-item">'+s(typeof(l=null!=(l=u(t,"\\n")||(null!=n?u(n,"\\n"):n))?l:c)===r?l.call(i,{name:"\\n",hash:{},data:o,loc:{start:{line:1,column:38},end:{line:1,column:47}}}):l)+'<label class="checkbox-list" for="'+s(typeof(l=null!=(l=u(t,"id")||(null!=n?u(n,"id"):n))?l:c)===r?l.call(i,{name:"id",hash:{},data:o,loc:{start:{line:2,column:36},end:{line:2,column:42}}}):l)+'">'+s(typeof(l=null!=(l=u(t,"\\n")||(null!=n?u(n,"\\n"):n))?l:c)===r?l.call(i,{name:"\\n",hash:{},data:o,loc:{start:{line:2,column:44},end:{line:2,column:53}}}):l)+'<input class="checkbox-list-input" type="checkbox" value="'+s(typeof(l=null!=(l=u(t,"name")||(null!=n?u(n,"name"):n))?l:c)===r?l.call(i,{name:"name",hash:{},data:o,loc:{start:{line:3,column:62},end:{line:3,column:72}}}):l)+'" id="'+s(typeof(l=null!=(l=u(t,"id")||(null!=n?u(n,"id"):n))?l:c)===r?l.call(i,{name:"id",hash:{},data:o,loc:{start:{line:3,column:78},end:{line:3,column:84}}}):l)+'" />\n    <span class="checkbox-list-checkmark">'+s(typeof(l=null!=(l=u(t,"\\n")||(null!=n?u(n,"\\n"):n))?l:c)===r?l.call(i,{name:"\\n",hash:{},data:o,loc:{start:{line:4,column:42},end:{line:4,column:51}}}):l)+'<span class="favorite-collections-item-name">'+s(typeof(l=null!=(l=u(t,"name")||(null!=n?u(n,"name"):n))?l:c)===r?l.call(i,{name:"name",hash:{},data:o,loc:{start:{line:5,column:51},end:{line:5,column:61}}}):l)+"</span>"+s(typeof(l=null!=(l=u(t,"\\n")||(null!=n?u(n,"\\n"):n))?l:c)===r?l.call(i,{name:"\\n",hash:{},data:o,loc:{start:{line:5,column:68},end:{line:5,column:77}}}):l)+"</span>"+s(typeof(l=null!=(l=u(t,"\\n")||(null!=n?u(n,"\\n"):n))?l:c)===r?l.call(i,{name:"\\n",hash:{},data:o,loc:{start:{line:6,column:11},end:{line:6,column:20}}}):l)+"</label>"+s(typeof(l=null!=(l=u(t,"\\n")||(null!=n?u(n,"\\n"):n))?l:c)===r?l.call(i,{name:"\\n",hash:{},data:o,loc:{start:{line:7,column:10},end:{line:7,column:19}}}):l)+"</li>\n"},useData:!0})}}]);
//# sourceMappingURL=53-53.js.map